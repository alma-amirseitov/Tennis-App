# Управление ивентами и турнирами 🎾

## Список ивентов
Таблица с фильтрацией по статусу, типу, дате.

### Статусы: Черновик → Опубликован → Набор открыт → В процессе → Завершён → Архив

### Создание ивента (веб-форма)
Та же логика что в мобильном конструкторе, но в виде единой формы с секциями:
1. Основная информация (тип, название, описание)
2. Формат (состав, правила матча)
3. Турнирная система (если турнир)
4. Место и время
5. Участники (ограничения, макс. число)
6. Стоимость
7. Публикация / Сохранить черновик

---

## Турнирный модуль (ключевая функция для лиг/организаторов)

### Турнирная сетка
Визуальный интерфейс для управления турниром.

#### Knock-out (олимпийская система)
```
┌──────────────────────────────────────────────────────────────┐
│  Весенний турнир NTC — Knock-out (16 участников)            │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  1/8 финала      1/4 финала     Полуфинал      Финал       │
│                                                              │
│  ┌─────────┐                                                 │
│  │ Айдар С.│──┐                                              │
│  └─────────┘  │  ┌─────────┐                                 │
│  ┌─────────┐  ├──│ Айдар С.│──┐                              │
│  │ Марат К.│──┘  └─────────┘  │  ┌─────────┐               │
│  └─────────┘                  ├──│  ???    │──┐             │
│  ┌─────────┐                  │  └─────────┘  │             │
│  │ Дамир Н.│──┐  ┌─────────┐  │               │  ┌────────┐ │
│  └─────────┘  ├──│ Алмас Б.│──┘               ├──│ ???   │ │
│  ┌─────────┐  │  └─────────┘                  │  └────────┘ │
│  │ Алмас Б.│──┘                               │             │
│  └─────────┘                                  │             │
│  ...                                          │             │
└──────────────────────────────────────────────────────────────┘
```

#### Round-Robin
```
┌──────────────────────────────────────────────────────┐
│  Группа A — Round Robin                              │
├──────┬────────┬────────┬────────┬────────┬───┬───┬──┤
│  #   │ Игрок  │ Айдар  │ Марат  │ Дамир  │ W │ L │Pts│
├──────┼────────┼────────┼────────┼────────┼───┼───┼──┤
│  1   │ Айдар  │   —    │  6:4   │  6:3   │ 2 │ 0 │ 4│
│  2   │ Дамир  │  3:6   │  7:5   │   —    │ 1 │ 1 │ 2│
│  3   │ Марат  │  4:6   │   —    │  5:7   │ 0 │ 2 │ 0│
└──────┴────────┴────────┴────────┴────────┴───┴───┴──┘
```

### Автожеребьёвка
- **По рейтингу**: сеяные игроки расставляются по корзинам
- **Случайная**: рандомное распределение
- **Ручная**: админ расставляет сам (drag & drop)
- Возможность перемешать после генерации

### Ручной ввод результатов админом
Админ/тренер/судья может внести результат за обоих игроков:
```
Матч: Айдар С. vs Марат К.
Корт: 3  |  Время: 14:00

Сет 1: [6] : [4]
Сет 2: [3] : [6]
Сет 3: [7] : [5]

Победитель: ● Айдар С. ○ Марат К.

Комментарий (опционально): [___]

[Сохранить результат]
```
- При ручном вводе админом — подтверждение от игроков не требуется
- Результат сразу идёт в пересчёт рейтинга

### Автоматический пересчёт рейтинга
- Триггер: подтверждённый результат матча
- Алгоритм: ELO-like (K-фактор зависит от количества игр)
- Обновление: глобальный рейтинг + рейтинг сообщества
- Уведомление обоим игрокам

---

## Расписание кортов (только для клубов)

```
┌──────────────────────────────────────────────────────┐
│  Расписание кортов — 15 февраля 2026                 │
│  ← Пред. день        Сегодня        След. день →    │
├──────────┬─────────┬─────────┬─────────┬─────────────┤
│ Время    │ Корт 1  │ Корт 2  │ Корт 3  │ Корт 4     │
├──────────┼─────────┼─────────┼─────────┼─────────────┤
│ 08:00    │         │ Группа  │         │             │
│ 09:00    │ Тренир. │ занятие │ Свободен│ Свободен    │
│ 10:00    │         │         │         │             │
│ 11:00    │ Турнир  │ Турнир  │ Турнир  │ Турнир      │
│ ...      │ NTC     │ NTC     │ NTC     │ NTC         │
└──────────┴─────────┴─────────┴─────────┴─────────────┘
```

- Drag & drop для назначения ивентов на корты
- Цветовая кодировка по типу (тренировка, турнир, аренда)
- Привязка ивентов к конкретным кортам и слотам

---

## Экспорт данных
- **Участники**: CSV (имя, телефон, уровень, рейтинг)
- **Результаты турнира**: PDF (турнирная сетка + результаты)
- **Статистика**: CSV (игры, win/loss по игрокам)
- **Финансовый отчёт**: CSV/PDF (оплаты, подписки)
